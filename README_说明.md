# 🌊 观潮 TideSonar - 资金流向实时监控系统

**观潮 (TideSonar)** 是一个专为 A 股短线交易者设计的实时盯盘系统。它不关注基本面，只关注**资金的真实流动**。通过捕捉市场中最活跃的成交脉搏，帮你第一时间发现主力资金正在攻击的方向。

---

## 🎯 1. 项目作用与设计哲学

在几千只股票的 A 股市场中，散户最大的痛点是**“注意力分散”**。
- 大部分行情软件：展示几千只股票，信息过载，这也是噪音，那也是噪音。
- **观潮 TideSonar**：**做减法**。我们认为，没有资金关注的股票就是“死股”，不值得浪费时间看。

**核心价值**：
> **“只看风浪最大的地方。”**
> 系统自动过滤掉 95% 的无效波动，只把当前市场成交最活跃、资金介入最深的那 **120 只** 股票（四大赛道各 30 只）推送到你面前。

---

## ⚙️ 2. 核心选股逻辑 (Scientific V1.0)

我们的筛选不是随机的，而是基于严格的**资金强度排序**。系统每 0.5 秒扫描全市场，但只展示满足以下条件的标的：

### A. 四大黄金赛道 (分层竞争)
为了防止大盘股淹没小盘股，我们将市场撕裂为四个独立维度的战场。每个战场独立排名，互不干扰：

| 赛道 | 代号 | 风格关键词 | 适合策略 |
| :--- | :--- | :--- | :--- |
| **沪深300** | HS300 | `核心资产`、`国家队`、`大票` | 趋势跟踪、机构抱团 |
| **中证500** | ZZ500 | `中盘成长`、`行业龙头` | 成长股接力、产业趋势 |
| **中证1000** | ZZ1000 | `中小活跃`、`游资主战场` | 题材炒作、打板、连板 |
| **中证2000** | ZZ2000 | `微盘投机`、`妖股本营` | 极致投机、量化主战场 |

### B. 筛选标准 (Top 30)
在每个赛道内，系统执行以下铁律：
1.  **成交额 (Amount) 优先**：只有真金白银买出来的量才是真的。我们按成交金额从大到小排序。
2.  **Top 30 截断**：每个赛道只取前 30 名。这意味着能上榜的，每一个都是该板块当下的**资金“龙一”到“龙三十”**。
3.  **实时动态更新**：如果一只股票资金掉队了，它会立刻从榜单消失，被新的更强的股票取代。

---

## 📊 3. 选出的股票怎么用？(实战指南)

当你打开网页，看到这 4 列花花绿绿的卡片时，该怎么看？

### 1️⃣ 找“板块共振” (看颜色)
*   **现象**：如果你发现某一列（比如中证1000），突然冒出来一大片**蓝色标签**都写着“化学制品”或“半导体”。
*   **含义**：**板块效应来了**。这不是单打独斗，是主力资金在集体进攻某个行业。
*   **操作**：立刻点击其中涨幅适中（3%-5%）的个股进行关注，这往往是日内最安全的上车点。

### 2️⃣ 找“极致龙头” (看排序)
*   **现象**：不管什么时候刷新，**永远排在第一行**的那只股票。
*   **含义**：它是今天的**总龙头**。全市场都在看它，它的涨跌决定了整个板块的情绪。
*   **操作**：把它作为风向标。如果龙头封死涨停，可以大胆做后排的补涨股。

### 3️⃣ 找“异动妖股” (看中证2000)
*   **现象**：最右侧的一列 (ZZ2000) 经常出现涨幅 +10% 或 +20% 的票。
*   **含义**：这里是情绪投机最疯狂的地方。
*   **操作**：适合高风险偏好的选手寻找连板机会。

---

## 🏗️ 4. 技术架构与部署 (Under the Hood)

为了保证系统像心跳一样稳定，并且尽量帮你省钱，我们采用了以下架构：

*   **后端 (Python FastAPI)**：
    *   **智能调度**：交易时间 (9:30-15:00) 毫秒级拉取；休市时间自动休眠不跑流量。
    *   **元数据清洗**：自动从 API 抓取并清洗出“申万行业”和“热门概念”，拒绝“未分类”。
    *   **持久化快照**：收盘后自动抓取最后一次数据并锁死在内存中，保证晚上复盘也能看到今日行情。
*   **前端 (Vue 3)**：
    *   **响应式设计**：PC端 4 列展示，手机端自动变单列，随时随地盯盘。
    *   **WebSocket 直连**：数据毫秒级推送，无须刷新页面。
*   **部署 (Docker)**：
    *   **一键脚本**：`./deploy.sh` 包含环境检查、镜像加速、自动更新、配置记忆。
    *   **Nginx 反代**：自动处理 API 和 WS 转发，无需配置跨域和 IP。
    *   **时区锁定**：强制锁定 `Asia/Shanghai`，杜绝时间错乱。

---

## 🚀 5. 快速开始

### 已有服务器？
直接上传代码，运行：
```bash
sudo bash deploy.sh
```
全程按回车即可。

### 本地运行？
安装 Docker Desktop，双击运行：
```bat
start_docker.bat
```

---

> **免责声明**：
> 本系统仅作为市场数据即时监测工具，所有数据均来源于第三方 API。系统展示的排序结果仅供参考，不构成任何投资建议。股市有风险，入市需谨慎。

---

## 🔥 6. 进阶功能：市场热度监控

在页面右上角，你会看到一个跳动的数字：`⚡ 热度: N/min`。这是一个非常核心的高阶指标。

### 什么是热度？
它代表**最近1分钟内，新上榜的股票数量**（已去重）。
简单来说，它衡量的是“排行榜的刷新速度”。

### 如何实战使用？

点击该按钮，可以打开详细的**热度趋势图**，通过观察曲线的高低，辅助判断当下的市场状态：

| 热度值区间 | 状态定义 | 市场含义 | 建议策略 |
| :--- | :--- | :--- | :--- |
| **0 ~ 10** | **情绪稳定** | 强者恒强。龙头股筹码锁定良好，没有新的竞争者能挤掉它们的位置。 | **持股待涨**。不要轻易下车。 |
| **10 ~ 30** | **正常轮动** | 市场处于健康的换手状态，有老股票掉队，也有新面孔加入。 | **去弱留强**。关注新上榜的“新面孔”。 |
| **> 30** | **剧烈变盘** | 所谓“乱世出妖股”。大量资金正在从老热点撤离，疯狂攻击新方向。 | **警惕风险**。跟随新热点，或者空仓观望。 |

> **核心逻辑**：热度通过 `Set` 集合进行分钟级去重。如果一只股票在第30名和第31名之间反复横跳，系统只会以此计算 **1** 点热度，拒绝噪音干扰。
